@import 'variables';
@import 'baseline';
@import 'layout';
@import 'components';
@import 'content';

.container {
  @include grid-container();

  margin: 0 auto;
  max-width: 72rem + 2 * map-get($neat-grid, gutter);

  @include grid-media($md-neat-grid) {
    max-width: 96rem + 2 * map-get($md-neat-grid, gutter);
  }

  @include grid-media($lg-neat-grid) {
    max-width: 96rem + 2 * map-get($lg-neat-grid, gutter);
  }

  @include grid-media($xl-neat-grid) {
    max-width: 96rem + 2 * map-get($xl-neat-grid, gutter);
  }
}

table.army-list {
  > caption {
    background: none;
  }

  > colgroup > col {
    width: auto !important;
  }

  > thead {
    > tr > td {
      text-align: center;
    }
  }

  > tbody {
    > tr.bordered {
      border-top: .1rem solid $_color_light;
      padding-top: ($_ / 2 - .1rem);
    }
    > tr.striped {
      background: $_color_lightest;
    }
  }

  tr {
    position: static;

    &::after {
      @include position(static, auto);

      border-top: auto;
      content: none;
    }
  }

  td, th {
    vertical-align: top;
  }

  ul {
    list-style: none;
    margin: 0;
    padding: 0;

    > li {
      margin-bottom: ($_ / 2);

      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

#cover,
#copyright {
  display: none;
}

#examples_of_formations {
  border: .1rem solid $_color_light;
  margin: 0 auto ($_ / 2 - .2rem);
  max-width: 391px;

  figcaption {
    background: $_color_lightest;
    border-bottom: .1rem solid $_color_light;
    font-weight: bold;
    padding: ($_ / 2) 1em ($_ / 2 - .1rem);
  }

  > div {
    padding: ($_ / 2) 1em;
  }

  img:last-child {
    margin: 0;
  }
}

#example_initiatve_values,
#needing_7_to_hit {
  border: 0;
  margin: 0 auto;
  width: auto;
}

#examples_of_terrain {
  img {
    @include margin(null auto);

    display: block;
  }

  @include grid-media($md-neat-grid) {
    figure {
      display: table;
    }

    img,
    figcaption {
      display: table-cell;
      margin: 0;
      vertical-align: top;
    }

    figcaption {
      padding-right: 1em;
    }

    #hull_down_example {
      margin-right: 1em;
      min-width: 504px;

      + figcaption {
        @include padding(null 0 null 1em);
      }
    }

    #partial_cover_example {
      margin-left: 1em;
      min-width: 461px;
    }
  }
}

#weapon_fire_arcs {
  @include margin(null auto 0);

  display: block;

  @include grid-media($md-neat-grid) {
    float: right;

    ~ p {
      margin-right: 395px;
      padding-right: 1em;
    }
  }
}

#needing_7_to_hit {
  margin-bottom: 0;
}

.barrage-table {
  text-align: center;

  > thead > tr:last-child::after {
    border: none;
  }
}

#abbreviations,
.design-concept,
.example-of-play,
article.faq,
.short-story,
.special-rule {
  border: .1rem solid $_color_light;
  margin: 0 auto ($_ / 2 - .2rem);

  header,
  h1, .h1,
  h2, .h2,
  h3, .h3,
  h4, .h4,
  h5, .h5,
  h6, .h6 {
    @include _($_font_size_h4);

    background: $_color_lightest;
    border-bottom: .1rem solid $_color_light;
    font-weight: bold;
    margin: 0;
    padding: ($_ / 2) 1em ($_ / 2 - .1rem);

    + .faq {
      margin-top: ($_ / 2);
    }
  }

  > div {
    padding: ($_ / 2) 1em;
    > :last-child {
      margin-bottom: 0;
    }
  }
}
#abbreviations {
  @include grid-media($md-neat-grid) {
    > div {
      @include grid-collapse();
      @include grid-container();

      > dl {
        @include grid-column(4);
      }
    }
  }

  @include grid-media($lg-neat-grid) {
    > div {
      @include grid-collapse();

      > dl {
        @include grid-column(4);
      }
    }
  }

  @include grid-media($xl-neat-grid) {
    > div {
      @include grid-collapse();

      > dl {
        @include grid-column(4);
      }
    }
  }
}
.design-concept header::before {
  content: 'Design Concept: ';
}
.faq {
  dl {
    > dt {
      float: none;

      &::before {
        content: 'Q: ';
      }

      &::after {
        content: none;
      }

      + dd::before {
        content: 'A: ';
      }
    }

    > dd {
    }
  }
}
.example-of-play header::before {
  content: 'Example of Play: ';
}
.special-rule {
  h1, .h1,
  h2, .h2,
  h3, .h3,
  h4, .h4,
  h5, .h5,
  h6, .h6 {
    &::before {
      content: 'Special Rule: ';
    }
  }

  .faq {
    margin: 0 1em;
  }
}

.unit {
  @include clearfix();

  overflow-x: auto;

  .stats {
    display: table;
    width: 100%;

    > * {
      display: table-cell;
      padding: 0 0.5em;
      text-align: center;

      &::before { display: block; }

      &.name {
        text-align: left;

        &::before { content: 'Name'; }
      }
      &.type::before { content: 'Type'; }
      &.speed::before { content: 'Speed'; }
      &.armour::before { content: 'Armour'; }
      &.cc::before { content: 'CC'; }
      &.ff::before { content: 'FF'; }
    }
  }
  .weapons {
    display: table;
    width: 100%;
  }
  .weapon {
    display: table-row-group;

    &:first-child > .weapon-line:first-child > * {
      &::before { display: block; }

      &.name::before { content: 'Weapons'; }
      &.range::before { content: 'Range'; }
      &.firepower::before { content: 'Firepower'; }
    }
  }
  .weapon-line {
    display: table-row;

    > * {
      display: table-cell;
      padding: 0 0.5em;
      text-align: center;

      &.name { text-align: left; }
      &.boolean { text-align: right; }
      &.firepower {
        text-align: left;

        > :not(:last-child)::after { content: ', '; }

        .special-rules > li:last-child::after { content: none; }
      }
    }
  }
  .notes {
    padding: 0 0.5em;

    > * { margin-bottom: 0; }
    > .special-rules {
      font-style: italic;

      + * { display: inline; }
    }
    > :first-child::before {
      content: 'Notes: ';
      font-style: normal;
    }
  }

  .special-rules {
    padding: 0;

    &, > li { display: inline; }

    > li::after { content: ', '; }
    > li:last-child::after { content: '.'; }
  }
}

.unit {
  background: $_color_lighter;

  .stats, .weapon:first-child > .weapon-line:first-child {
    > *::before {
      color: $_color_gray;
      font-size: 1rem;
      letter-spacing: 0.03em;
      line-height: 1.2;
      position: relative;
      text-transform: uppercase;
      top: 2px;
    }
  }

  .stats > .name {
    font-weight: bold;

    &::before {
      font-weight: normal;
    }
  }

  @include grid-media($md-neat-grid) {
    .stats, .weapons {
      float: left;
      width: 50%;
    }
    .notes {
      clear: both;
    }
  }
}

.datasheet {
  margin: 0 0 ($_ / 2);
  overflow-x: auto;

  .unit:nth-child(odd) {
    background: $_body_background;
  }
}

.has-footnote::after {
  content: ' ' attr(data-footnote);
  font-size: 1rem;
  font-weight: normal;
  line-height: 0;
  vertical-align: super;
}